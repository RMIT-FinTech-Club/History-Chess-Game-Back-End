datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  user_id       Int      @id @default(autoincrement())
  username      String   @unique @db.VarChar(50)
  email         String   @unique @db.VarChar(100)
  password_hash String   @db.VarChar(255)
  wallet_address String?  @unique @db.VarChar(255)
  elo           Int?     // Chess Elo rating
  created_time  DateTime @default(now()) @db.Timestamp
  updated_time  DateTime @default(now()) @db.Timestamp
  nfts          Nft[]
}

model Nft {
  nft_id        Int      @id @default(autoincrement())
  token_id      String   @unique @db.VarChar(255)
  owner_id      Int
  detailed_info Json     @db.JsonB // e.g., {"name": "Chess King", "rarity": "Legendary"}
  minted_time   DateTime @default(now()) @db.Timestamp
  owner         User     @relation(fields: [owner_id], references: [user_id])
}